generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model User {
  id           String        @id @default(auto()) @map("_id") @db.ObjectId
  name         String
  email        String        @unique
  password     String?
  role         Role          @default(CANDIDATE)
  profile      Profile?
  applications Application[]
}

model Profile {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  userId     String   @unique @db.ObjectId
  skills     String[]
  experience String?
  education  String?
  resumeUrl  String?
  user       User?    @relation(fields: [userId], references: [id])
}

model Job {
  id           String        @id @default(auto()) @map("_id") @db.ObjectId
  title        String
  company      String
  description  String
  location     String
  salary       Int
  experience   String
  skills       String[]
  recruiterId  String
  applications Application[]
}

model Application {
  id          String  @id @default(auto()) @map("_id") @db.ObjectId
  jobId       String
  userId      String
  resumeUrl   String
  coverLetter String?
  status      Status  @default(PENDING)
  user        User    @relation(fields: [userId], references: [id])
  job         Job     @relation(fields: [jobId], references: [id])
}

enum Role {
  CANDIDATE
  RECRUITER
  ADMIN
}

enum Status {
  PENDING
  SHORTLISTED
  REJECTED
}
